  private applyRetryLogic(config: ApiEndpointConfig) {
    return (source: Observable<any>) =>
      config.retryEnabled && config.maxRetries > 0
        ? source.pipe(
            retryWhen(errors =>
              errors.pipe(
                delayWhen((_, attempt) => timer(Math.pow(2, attempt) * 1000)),
                switchMap((error, attempt) =>
                  attempt < config.maxRetries ? of(error) : throwError(() => error)
                )
              )
            )
          )
        : source;
  }
